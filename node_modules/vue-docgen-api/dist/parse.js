"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.parseSource = exports.parse = void 0;var _fs = _interopRequireDefault(require("fs"));
var _getSandbox = _interopRequireDefault(require("./utils/getSandbox"));
var _getVueDoc = _interopRequireDefault(require("./utils/getVueDoc"));
var _stateDoc = _interopRequireDefault(require("./utils/stateDoc"));

var parse = function parse(file) {
  var source = _fs.default.readFileSync(file, {
    encoding: 'utf-8' });

  return parseSource(source, file);
};exports.parse = parse;

var parseSource = function parseSource(source, path) {
  if (source === '') {
    throw new Error('The document is empty');
  }
  _stateDoc.default.file = path;
  _stateDoc.default.saveComponent(source, path);
  var component = (0, _getSandbox.default)(_stateDoc.default, path).default;
  var vueDoc = (0, _getVueDoc.default)(_stateDoc.default, component);
  _stateDoc.default.reset();
  return vueDoc;
};exports.parseSource = parseSource;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJzZS5qcyJdLCJuYW1lcyI6WyJwYXJzZSIsImZpbGUiLCJzb3VyY2UiLCJmcyIsInJlYWRGaWxlU3luYyIsImVuY29kaW5nIiwicGFyc2VTb3VyY2UiLCJwYXRoIiwiRXJyb3IiLCJzdGF0ZURvYyIsInNhdmVDb21wb25lbnQiLCJjb21wb25lbnQiLCJkZWZhdWx0IiwidnVlRG9jIiwicmVzZXQiXSwibWFwcGluZ3MiOiI2TUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTyxJQUFNQSxLQUFLLEdBQUcsU0FBUkEsS0FBUSxDQUFTQyxJQUFULEVBQWU7QUFDbEMsTUFBTUMsTUFBTSxHQUFHQyxZQUFHQyxZQUFILENBQWdCSCxJQUFoQixFQUFzQjtBQUNuQ0ksSUFBQUEsUUFBUSxFQUFFLE9BRHlCLEVBQXRCLENBQWY7O0FBR0EsU0FBT0MsV0FBVyxDQUFDSixNQUFELEVBQVNELElBQVQsQ0FBbEI7QUFDRCxDQUxNLEM7O0FBT0EsSUFBTUssV0FBVyxHQUFHLFNBQWRBLFdBQWMsQ0FBU0osTUFBVCxFQUFpQkssSUFBakIsRUFBdUI7QUFDaEQsTUFBSUwsTUFBTSxLQUFLLEVBQWYsRUFBbUI7QUFDakIsVUFBTSxJQUFJTSxLQUFKLENBQVUsdUJBQVYsQ0FBTjtBQUNEO0FBQ0RDLG9CQUFTUixJQUFULEdBQWdCTSxJQUFoQjtBQUNBRSxvQkFBU0MsYUFBVCxDQUF1QlIsTUFBdkIsRUFBK0JLLElBQS9CO0FBQ0EsTUFBTUksU0FBUyxHQUFHLHlCQUFXRixpQkFBWCxFQUFxQkYsSUFBckIsRUFBMkJLLE9BQTdDO0FBQ0EsTUFBTUMsTUFBTSxHQUFHLHdCQUFVSixpQkFBVixFQUFvQkUsU0FBcEIsQ0FBZjtBQUNBRixvQkFBU0ssS0FBVDtBQUNBLFNBQU9ELE1BQVA7QUFDRCxDQVZNLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMnXG5pbXBvcnQgZ2V0U2FuZGJveCBmcm9tICcuL3V0aWxzL2dldFNhbmRib3gnXG5pbXBvcnQgZ2V0VnVlRG9jIGZyb20gJy4vdXRpbHMvZ2V0VnVlRG9jJ1xuaW1wb3J0IHN0YXRlRG9jIGZyb20gJy4vdXRpbHMvc3RhdGVEb2MnXG5cbmV4cG9ydCBjb25zdCBwYXJzZSA9IGZ1bmN0aW9uKGZpbGUpIHtcbiAgY29uc3Qgc291cmNlID0gZnMucmVhZEZpbGVTeW5jKGZpbGUsIHtcbiAgICBlbmNvZGluZzogJ3V0Zi04JyxcbiAgfSlcbiAgcmV0dXJuIHBhcnNlU291cmNlKHNvdXJjZSwgZmlsZSlcbn1cblxuZXhwb3J0IGNvbnN0IHBhcnNlU291cmNlID0gZnVuY3Rpb24oc291cmNlLCBwYXRoKSB7XG4gIGlmIChzb3VyY2UgPT09ICcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgZG9jdW1lbnQgaXMgZW1wdHknKVxuICB9XG4gIHN0YXRlRG9jLmZpbGUgPSBwYXRoXG4gIHN0YXRlRG9jLnNhdmVDb21wb25lbnQoc291cmNlLCBwYXRoKVxuICBjb25zdCBjb21wb25lbnQgPSBnZXRTYW5kYm94KHN0YXRlRG9jLCBwYXRoKS5kZWZhdWx0XG4gIGNvbnN0IHZ1ZURvYyA9IGdldFZ1ZURvYyhzdGF0ZURvYywgY29tcG9uZW50KVxuICBzdGF0ZURvYy5yZXNldCgpXG4gIHJldHVybiB2dWVEb2Ncbn1cbiJdfQ==