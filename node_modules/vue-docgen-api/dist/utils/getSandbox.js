"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");var _evalComponentCode = _interopRequireDefault(require("./evalComponentCode"));
var _getSourceInRequire = _interopRequireDefault(require("./getSourceInRequire"));
var _getMixin = _interopRequireDefault(require("./getMixin"));
var _getExtends = _interopRequireDefault(require("./getExtends"));
var _parseModule = _interopRequireDefault(require("./parseModule"));

module.exports = function getSandbox(stateDoc, file) {
  var parsedSource = (0, _parseModule.default)(stateDoc.jscodeRequest, file, stateDoc.jscodeLang);
  var sandbox = (0, _evalComponentCode.default)(parsedSource).exports;
  sandbox.default = sandbox.default || {};
  var component = sandbox.default;
  var listRequire = (0, _getSourceInRequire.default)(parsedSource, file);
  var mixins = (0, _getMixin.default)(listRequire).reverse();
  component.mixins = mixins;
  if (component.extends) {
    component.mixins = (0, _getExtends.default)(listRequire).reverse();
  }
  return sandbox;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9nZXRTYW5kYm94LmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJnZXRTYW5kYm94Iiwic3RhdGVEb2MiLCJmaWxlIiwicGFyc2VkU291cmNlIiwianNjb2RlUmVxdWVzdCIsImpzY29kZUxhbmciLCJzYW5kYm94IiwiZGVmYXVsdCIsImNvbXBvbmVudCIsImxpc3RSZXF1aXJlIiwibWl4aW5zIiwicmV2ZXJzZSIsImV4dGVuZHMiXSwibWFwcGluZ3MiOiJrR0FBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBQSxNQUFNLENBQUNDLE9BQVAsR0FBaUIsU0FBU0MsVUFBVCxDQUFvQkMsUUFBcEIsRUFBOEJDLElBQTlCLEVBQW9DO0FBQ25ELE1BQU1DLFlBQVksR0FBRywwQkFBWUYsUUFBUSxDQUFDRyxhQUFyQixFQUFvQ0YsSUFBcEMsRUFBMENELFFBQVEsQ0FBQ0ksVUFBbkQsQ0FBckI7QUFDQSxNQUFNQyxPQUFPLEdBQUcsZ0NBQWtCSCxZQUFsQixFQUFnQ0osT0FBaEQ7QUFDQU8sRUFBQUEsT0FBTyxDQUFDQyxPQUFSLEdBQWtCRCxPQUFPLENBQUNDLE9BQVIsSUFBbUIsRUFBckM7QUFDQSxNQUFNQyxTQUFTLEdBQUdGLE9BQU8sQ0FBQ0MsT0FBMUI7QUFDQSxNQUFNRSxXQUFXLEdBQUcsaUNBQW1CTixZQUFuQixFQUFpQ0QsSUFBakMsQ0FBcEI7QUFDQSxNQUFNUSxNQUFNLEdBQUcsdUJBQVNELFdBQVQsRUFBc0JFLE9BQXRCLEVBQWY7QUFDQUgsRUFBQUEsU0FBUyxDQUFDRSxNQUFWLEdBQW1CQSxNQUFuQjtBQUNBLE1BQUlGLFNBQVMsQ0FBQ0ksT0FBZCxFQUF1QjtBQUNyQkosSUFBQUEsU0FBUyxDQUFDRSxNQUFWLEdBQW1CLHlCQUFXRCxXQUFYLEVBQXdCRSxPQUF4QixFQUFuQjtBQUNEO0FBQ0QsU0FBT0wsT0FBUDtBQUNELENBWkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXZhbENvbXBvbmVudENvZGUgZnJvbSAnLi9ldmFsQ29tcG9uZW50Q29kZSdcbmltcG9ydCBnZXRTb3VyY2VJblJlcXVpcmUgZnJvbSAnLi9nZXRTb3VyY2VJblJlcXVpcmUnXG5pbXBvcnQgZ2V0TWl4aW4gZnJvbSAnLi9nZXRNaXhpbidcbmltcG9ydCBnZXRFeHRlbmRzIGZyb20gJy4vZ2V0RXh0ZW5kcydcbmltcG9ydCBwYXJzZU1vZHVsZSBmcm9tICcuL3BhcnNlTW9kdWxlJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldFNhbmRib3goc3RhdGVEb2MsIGZpbGUpIHtcbiAgY29uc3QgcGFyc2VkU291cmNlID0gcGFyc2VNb2R1bGUoc3RhdGVEb2MuanNjb2RlUmVxdWVzdCwgZmlsZSwgc3RhdGVEb2MuanNjb2RlTGFuZylcbiAgY29uc3Qgc2FuZGJveCA9IGV2YWxDb21wb25lbnRDb2RlKHBhcnNlZFNvdXJjZSkuZXhwb3J0c1xuICBzYW5kYm94LmRlZmF1bHQgPSBzYW5kYm94LmRlZmF1bHQgfHwge31cbiAgY29uc3QgY29tcG9uZW50ID0gc2FuZGJveC5kZWZhdWx0XG4gIGNvbnN0IGxpc3RSZXF1aXJlID0gZ2V0U291cmNlSW5SZXF1aXJlKHBhcnNlZFNvdXJjZSwgZmlsZSlcbiAgY29uc3QgbWl4aW5zID0gZ2V0TWl4aW4obGlzdFJlcXVpcmUpLnJldmVyc2UoKVxuICBjb21wb25lbnQubWl4aW5zID0gbWl4aW5zXG4gIGlmIChjb21wb25lbnQuZXh0ZW5kcykge1xuICAgIGNvbXBvbmVudC5taXhpbnMgPSBnZXRFeHRlbmRzKGxpc3RSZXF1aXJlKS5yZXZlcnNlKClcbiAgfVxuICByZXR1cm4gc2FuZGJveFxufVxuIl19